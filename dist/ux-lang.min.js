/*! ux-lang 1.2.1 https://github.com/baudo2048/ux-lang.git @license MIT */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ux=t()}(this,(function(){"use strict";function e(e){const t=e.substr(0,1);return"."==t?"attr":"-"==t?"style":"'"==t?"text":"\\"==t?"include":"<"==t?"html":"elem"}function t(e){return"*"==e.substr(0,1)}function s(e){const t=e.substr(0,1);return"."==t?"attr":"-"==t?"style":"'"==t?"text":"\\"==t?"include":"<"==t?"html":"elem"}function n(e){return"*"==e.substr(0,1)}return{parserForHtml:function(s,n,h="",r=""){const l={div:0,svg:1,circle:1,rect:1,polyline:1,text:1},c={0:"",1:"http://www.w3.org/2000/svg"};var o=[],p=[],u=n.split("\n"),i=0,a="",f="",d="0",$=[],m=0,g=0,v=!0,x="";for(u.forEach(((n,h,r)=>{var u=n.trim().split(" ");if(0!=u.length&&""!=u[0]){var E,N=u[0],_=e(N);if(E=n,m=Math.floor(E.search(/\S|$/)/4),"elem"==_){if(1==u.length?f=t(N)?N.slice(1)+"_"+i:N+"_"+i:2==u.length&&"elem"==e(u[1])?f=u[1]:2==u.length&&"text"==e(u[1])?f=t(N)?N.slice(1)+"_"+i:N+"_"+i:u.length>=3&&"elem"==e(u[1])?f=u[1]:u.length>=3&&"text"==e(u[1])&&(f=t(N)?N.slice(1)+"_"+i:N+"_"+i),v&&(v=!1,x=f,p.push("const jsdom = require('jsdom')"),p.push("const { JSDOM } = jsdom"),p.push("const dom = new JSDOM('<!DOCTYPE html><html><head></head><body></body></html>')"),p.push("document = dom.window.document"),p.push(`module.exports = function ${s}() `),p.push("{")),a=f,d=l[u[0]],t(N))o.push(`const ${N.slice(1)} = require('./${N.slice(1)}')`),p.push(`var ${f} = ${N.slice(1)}()`);else if(0==d||void 0===d){if(p.push(`var ${f} = document.createElement('${u[0]}')`),2==u.length&&"text"==e(u[1])){var y="";u.slice(1).forEach((e=>{y=y+" "+e})),p.push(`${f}.append(document.createTextNode(${y}'))`)}else if(u.length>2&&"text"==e(u[1])){y="";u.slice(1).forEach((e=>{y=y+" "+e})),p.push(`${f}.append(document.createTextNode(${y}'))`)}else if(u.length>2&&"text"==e(u[2])){y="";u.slice(2).forEach((e=>{y=y+" "+e})),p.push(`${f}.append(document.createTextNode(${y}'))`)}}else p.push(`var ${f} = document.createElementNS('${c[d]}','${u[0]}')`),(2==u.length&&"text"==e(u[1])||3==u.length)&&p.push(`${f}.append(document.createTextNode(${u[1]}))`);if(g>m){const e=g-m;for(h=0;h<e;h++)$[$.length-1].forEach(((e,t,s)=>{const n=$[$.length-2];var h=n[n.length-1];p.push(""),p.push(`${h}.appendChild(${e})`),p.push("")})),$.splice($.length-1,1)}m>$.length-1&&$.push([]),$[m].push(`${f}`)}"attr"==_&&function(e,t,s,n){var h=e[1];e.slice(2).forEach((e=>{h=h+" "+e})),"on"==e[0].substr(1,2)?t.push(`${s}${e[0]} = ${h}`):0==n||void 0===n?t.push(`${s}${e[0]}= '${h}'`):t.push(`${s}.setAttribute('${e[0].slice(1)}', '${h}')`)}(u,p,a,d),"text"==_&&function(e,t,s,n){var h=e[0].slice(1);e.slice(1).forEach((e=>{h=h+" "+e})),t.push(`var textNode_${n} = document.createTextNode('${h}')`),t.push(`${s}.append(textNode_${n})`)}(u,p,a,i),"style"==_&&function(e,t,s){var n=e[1];e.slice(2).forEach((e=>{n=n+" "+e})),t.push(`${s}.style${e[0].replace("-",".")}='${n}'`)}(u,p,a),"html"==_&&p.push(n),g=m,i+=1}}));$.length>1;)$[$.length-1].forEach(((e,t,s)=>{const n=$[$.length-2];var h=n[n.length-1];p.push(""),p.push(`${h}.appendChild(${e})`),p.push("")})),$.splice($.length-1,1);h.split("\n").forEach((e=>{var t=e.trim();"import"==(t=t.split(" "))[0]?o.push(e):p.push(e)})),r.split("\n").forEach((e=>{var t=e.trim();"import"==(t=t.split(" "))[0]?o.push(e):p.push(e)})),p.push(`return ${x}`),p.push("}");var E="";return o.forEach((e=>{E+=e+"\n"})),p.forEach((e=>{E+=e+"\n"})),E},parserJSFunction:function(e,t,h="",r=""){const l={div:0,svg:1,circle:1,rect:1,path:1,polygon:1,polyline:1,text:1,g:1},c={0:"",1:"http://www.w3.org/2000/svg"};var o=[],p=[],u=t.split("\n"),i=0,a="",f="",d="0",$=[],m=0,g=0,v=!0,x="";for(u.forEach(((t,h,r)=>{var o=t.trim().split(" ");if(0!=o.length&&""!=o[0]){var u,E=o[0],N=s(E);if(u=t,m=Math.floor(u.search(/\S|$/)/4),"elem"==N){if(1==o.length?f=n(E)?E.slice(1)+"_"+i:E+"_"+i:2==o.length&&"elem"==s(o[1])?f=o[1]:2==o.length&&"text"==s(o[1])?f=n(E)?E.slice(1)+"_"+i:E+"_"+i:o.length>=3&&"elem"==s(o[1])?f=o[1]:o.length>=3&&"text"==s(o[1])&&(f=n(E)?E.slice(1)+"_"+i:E+"_"+i),v&&(v=!1,x=f,p.push(`function ${e}() `),p.push("{")),a=f,d=l[o[0]],n(E))p.push(`var ${f} = ${E.slice(1)}()`);else if(0==d||void 0===d){if(p.push(`var ${f} = document.createElement('${o[0]}')`),2==o.length&&"text"==s(o[1])){var _="";o.slice(1).forEach((e=>{_=_+" "+e})),p.push(`${f}.append(document.createTextNode(${_}'))`)}else if(o.length>2&&"text"==s(o[1])){_="";o.slice(1).forEach((e=>{_=_+" "+e})),p.push(`${f}.append(document.createTextNode(${_}'))`)}else if(o.length>2&&"text"==s(o[2])){_="";o.slice(2).forEach((e=>{_=_+" "+e})),p.push(`${f}.append(document.createTextNode(${_}'))`)}}else p.push(`var ${f} = document.createElementNS('${c[d]}','${o[0]}')`),(2==o.length&&"text"==s(o[1])||3==o.length)&&p.push(`${f}.append(document.createTextNode(${o[1]}'))`);if(g>m){const e=g-m;for(h=0;h<e;h++)$[$.length-1].forEach(((e,t,s)=>{const n=$[$.length-2];var h=n[n.length-1];p.push(""),p.push(`${h}.appendChild(${e})`),p.push("")})),$.splice($.length-1,1)}m>$.length-1&&$.push([]),$[m].push(`${f}`)}"attr"==N&&function(e,t,s,n){var h=e[1];e.slice(2).forEach((e=>{h=h+" "+e})),"on"==e[0].substr(1,2)?t.push(`${s}${e[0]} = ${h}`):t.push(`${s}.setAttribute('${e[0].slice(1)}', '${h}')`)}(o,p,a),"text"==N&&function(e,t,s,n){var h=e[0].slice(1);e.slice(1).forEach((e=>{h=h+" "+e})),t.push(`var textNode_${n} = document.createTextNode('${h}')`),t.push(`${s}.append(textNode_${n})`)}(o,p,a,i),"style"==N&&function(e,t,s){var n=e[1];e.slice(2).forEach((e=>{n=n+" "+e})),t.push(`${s}.style${e[0].replace("-",".")}='${n}'`)}(o,p,a),"html"==N&&p.push(t),g=m,i+=1}}));$.length>1;)$[$.length-1].forEach(((e,t,s)=>{const n=$[$.length-2];var h=n[n.length-1];p.push(""),p.push(`${h}.appendChild(${e})`),p.push("")})),$.splice($.length-1,1);h.split("\n").forEach((e=>{var t=e.trim();"import"==(t=t.split(" "))[0]?o.push(e):p.push(e)})),r.split("\n").forEach((e=>{var t=e.trim();"import"==(t=t.split(" "))[0]?o.push(e):p.push(e)})),p.push(`return ${x}`),p.push("}");var E="";return o.forEach((e=>{E+=e+"\n"})),p.forEach((e=>{E+=e+"\n"})),E},getDependencies:function(e){var t=e.split("\n"),s=[];return t.forEach(((e,t,n)=>{var h=e.trim().split(" ");if(0!=h.length&&""!=h[0]){var r=h[0];"*"==r.substr(0,1)&&s.push(r.slice(1))}})),s}}}));
